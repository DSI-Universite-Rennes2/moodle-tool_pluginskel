define(["jquery"],function(a){return{addMore:function(b){a("[name*='addmore_']").on("click",function(){var c,d=a(this).prop("name").replace("addmore_",""),e=+a("[name='"+d+"count']").val();for(var f in b)if(b[f].name==d){c=b[f];break}var g,h,i,j,k,l,m,n=e-1,o="<br/>";for(f in c.values){for(i=c.values[f],g=d+"["+e+"]["+i.name+"]",h="id_"+d+"_"+e+"_"+i.name,j=d+"["+n+"]["+i.name+"]",k="id_"+d+"_"+n+"_"+i.name,l=a("#fitem_"+k).attr("class"),m=a("#fitem_"+k).html();-1!=m.indexOf(j);)m=m.replace(j,g);for(;-1!=m.indexOf(k);)m=m.replace(k,h);o+='<div id="fitem_'+h+'" class="'+l+'">',o+=m,o+="</div>"}a("#fitem_id_addmore_"+d).before(o);for(f in c.values)if(i=c.values[f],h="id_"+d+"_"+e+"_"+i.name,"text"!=i.hint&&"int"!=i.hint){if("multiple-options"==i.hint){var p="required"in i&&i.required===!0;p||a("#"+h+' option[value="none"]').prop("selected",!0).change()}}else a("#"+h).removeAttr("value");a("[name='"+d+"count']").val(e+1)})}}});